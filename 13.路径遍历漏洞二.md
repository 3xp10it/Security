#13.路径遍历漏洞二
  
  上一篇提过，下载或上传处理不当很容易造成任意文件下载漏洞和任意路径文件上传漏洞。
  
  其实，坑不仅仅只有这个。如果以下这些坑你没意识去主动避免，那么很有可能哪一天就掉进去了。

##13.1 绕开后缀判断

```java
// 请求路径：http://example.com?name=github.jsp%00.jpg
String name = request.getParameter("name");

if (name.matches(".*\\.jpg")) {
	File file = new File(name);
	file.createNewFile();

	System.out.println("规范路径 : " + file.getCanonicalPath());
}
```

在很多操作系统中，控制字符%00被用于注入到文件名中，例如下面这个URL：
```
http://example.com?name=github.jsp%00.jpg
```
在Java应用看来，改文件名是以.jpg结尾的，而操作系统在碰到%00就被截断了，所以操作系统只能看到的是以.jsp结尾的。这个攻击用于绕开应用程序对文件后缀的检查。 

__控制字符`%00-%1f`最初是用于控制硬件设备，控制字符在URL中是无意的。__

##13.2 远程文件包含

##13.3 绝对路径遍历

##13.4 



## 参考资料
 * https://www.owasp.org/index.php/Path_Traversal
 * http://www.w3schools.com/tags/ref_urlencode.asp
 * https://www.owasp.org/index.php/File_System#Path_traversal
